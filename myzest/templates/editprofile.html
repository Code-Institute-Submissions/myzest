{% extends 'base.html' %}
{% block pagetitle %} - Edit {{ profile.username }} profile{% endblock %}
{% block content %}
<main class="container border-b pb-3">
    <form id="editprofile" action="{{ url_for('edit_profile', profile_id=profile._id) }}" method="POST" enctype="multipart/form-data">
        <h1 class="mt-2 mb-3">Edit your profile</h1>

        <section class="mb-5">
            <h3>Info</h3>
            <!-- user name -->
            <div class="row mb-2">
                <div class="col s12 input-field">
                    <label for="username">Your username</label>
                    <input id="username" class="validate" name="username" type="text" min="3" maxlength="31" pattern="[A-Za-z]{2,15}\s?[A-Za-z]{1,15}" required value="{{ profile.username }}">
                    <span class="helper-text" data-error="A valid name is requested"></span>
                </div>
            </div>

            <!-- user bio -->
            <div class="row valign-wrapper">
                <div class="col s11 input-field mt-2">
                    <label for="bio">About you</label>
                    <textarea id="bio" class="validate materialize-textarea" name="bio" maxlength="350">{{ profile.bio }}</textarea>
                    <span class="helper-text" data-error="Please write few words about you or delete"></span>
                </div>
                <i class="material-icons col s1" onclick="clearField(this)">cancel</i>
            </div>

            <!-- Profile pic -->
            <div class="row">
                <div class="col s12">
                    <label>Profile photo</label>
                    <div class="file-field input-field">
                        <div class="btn">
                            <span>Photo</span>
                            <input id="img-btn" class="validate" type="file" name="img" accept=".gif, .jpeg, .jpg, .png">
                        </div>
                        <div class="file-path-wrapper">
                            <input id="img-path" class="file-path validate" type="text" placeholder="Upload new photo here">
                        </div>
                        <span class="helper-text" data-error=""></span>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h3>Account</h3>
            <!-- user email -->
            <div class="row">
                <div class="col s12 input-field">
                    <label for="email">Your Email</label>
                    <input id="email" class="validate" name="email" type="email" pattern="[A-Za-z0-9._-]{2,30}[A-Za-z0-9]@[A-Za-z0-9-._]+\.[A-Za-z]{2,11}" required value="{{ profile.email }}">
                    <span id="email_help" class="helper-text" data-error=""></span>
                </div>
            </div>

            <!-- password -->
            <div class="row">
                <div class="col s12 input-field">
                    <label for="password">New Password</label>
                    <input id="password" class="validate" name="password" type="password">
                    <span class="helper-text" data-error=""></span>
                </div>
            </div>

            <!-- confirm password -->
            <div class="row">
                <div class="col s12 input-field">
                    <label for="passwConfirm">Confirm New Password</label>
                    <input id="passwConfirm" class="validate" name="passwConfirm" type="password">
                    <span class="helper-text" data-error=""></span>
                </div>
            </div>
        </section>

        <!-- Submission -->
        <footer class="valign-wrapper mb-4">
            <div id="submit-btn">
                <button class="btn" type="submit">
                    <div class="valign-wrapper">
                        <span class="mr-3">Submit</span><i class="material-icons">send</i>
                    </div>
                </button>
            </div>
            <a class="btn ml-4" href="{{ url_for('profile', profile_id=profile._id) }}">
                <div class="valign-wrapper">
                    <span class="mr-3">Cancel</span><i class="material-icons">cancel</i>
                </div>
            </a>
        </footer>
    </form>
</main>
{% endblock %}

{% block script %}
    <script type="text/javascript" src="{{ url_for('static', filename='js/form_helper.js') }}"></script>
{% endblock %}